(()=>{"use strict";class t{constructor(){this.tasks=JSON.parse(localStorage.getItem("list"))?JSON.parse(localStorage.getItem("list")):[]}}class e{constructor(t,e,s){this.description=t,this.completed=e,this.index=s}addTask(t,e){this.description=e,this.completed=!1,this.index=t.length+1,t.push({description:this.description,completed:this.completed,index:this.index}),localStorage.setItem("list",JSON.stringify(t)),s(this)}removeToDo(e){const s=document.querySelector(".listContainer");t.tasks=t.tasks.filter((t=>t.index!==Number(e))),localStorage.setItem("list",JSON.stringify(t.tasks)),s.innerHTML="",this.updateIndex(),this.displayList()}updateIndex=()=>{t.tasks=t.tasks.map(((t,e)=>(t.index=e+1,t))),localStorage.setItem("lisst",JSON.stringify(t.tasks))};displayList=()=>{document.querySelector(".listContainer").innerHTML="",JSON.parse(localStorage.getItem("list")).forEach(((t,e)=>{s(t)}))};editTask=(e,s)=>{const i=t.tasks.findIndex((t=>t.index===Number(e)));t.tasks[i]={...t.task[i],description:s},localStorage.setItem("list",JSON.stringify(t.tasks))};clearTasks=t=>t.filter((t=>!1===t.completed))}function s(t){const s=document.querySelector(".listContainer");document.querySelector("#userInput").value="";const i=document.createElement("li");s.appendChild(i);const n=document.createElement("div");n.classList.add("taskdiv"),n.setAttribute("id",t.index),i.appendChild(s);const d=document.createElement("input");d.setAttribute("type","checkbox"),d.setAttribute("id",t.index),d.classList.add("checkboxitem"),d.checked=t.completed?"checked":"",n.appendChild(d);const a=document.createElement("input");a.className="inputtext",a.setAttribute("type","text"),a.setAttribute("id",t.index),a.setAttribute("value",t.description),a.setAttribute("disabled",""),n.appendChild(a);const l=document.createElement("button");l.setAttribute("type","button"),l.classList.add("editButton"),l.classList.add(t.index),l.innerHTML='<i class="fa-solid fa-ellipsis-vertical fa-icon fa-lg"></i>',i.appendChild(l);const o=document.createElement("button");o.classList.add("deleteButton"),o.classList.add(t.index),o.setAttribute("type","button"),o.setAttribute("id",t.index),o.innerHTML=`<i id="${t.index}" class="fas fa-trash-alt fa-icon fa-lg"></i>`,o.style.display="none",i.appendChild(o),l.addEventListener("click",(()=>{const e=document.getElementsByClassName(`deleteButton ${t.index}`)[0];a.disabled=!1,a.focus(),l.style.display="none",e.style.display="block"})),o.addEventListener("click",(t=>{(new e).removeFromToDo(t.target.id)})),d.addEventListener("change",(t=>{(new e).checkTasks(t.target.id,t.target.checked)})),a.addEventListener("keydown",(t=>{"Enter"===t.key&&(a.placeholder=a.value,l.style.display="block",o.style.display="none",a.removeAttribute("disabled"),(new e).editItem(a.id,a.value),a.setAttribute("disabled",""))}))}window.addEventListener("load",(()=>{let t=[];const e=JSON.parse(localStorage.getItem("list"));for(let i=0;i<e.length;i+=1)s(),document.querySelectorAll(".listContent")[i].textContent=e[i].description,!0===e[i].completed&&(e[i].completed=!1),localStorage.setItem("list",JSON.stringify(e)),t=e}))})();